<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
    <link rel="stylesheet" href="/stylesheets.css">
    <!--
    Not sure if this is a mistake or just wasn't copied over...leaving as a reminder for now
    <link rel="stylesheet" href="/resources/demos/style.css">
    -->
  </head>
  <body>


<p> Now think back to the SECOND sound you listened to. Now rate how well you understood the ENTIRE sound. Move the slider to provide your overall rating. </p>


<!-- Set up slider in full screenwidth table -->
    <table width="100%" border="0">
      <tr>
        <td>
          <div style="float:left;width:50%;">HARD to understand</div>
          <div style="float:right;text-align:right;width:50%;">EASY to understand</div>
        </td>
      </tr>
      <tr>
        <td>
          <div id="slider"></div>
        </td>
      </tr>
      <tr>
        <td>
          <div id="ratingResult"></div>
        </td>
      </tr>
    </table>

	
	<!-- 
  User-initiated submit. To where? 
  On submit, redirect to preference.html
-->
<br><br>
<button id="submitB" onclick="nextPage()" type="button">Submit</button>

    <script src="//code.jquery.com/jquery-1.9.1.js"></script>
    <script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>


    <script type = "text/javascript">
 
 // Only the final slider position is needed here.

      $( "#slider" ).slider({
        value: 50,
        min: 0,
        max: 100,

        //this gets a live reading of the value and prints it on the page
   //     slide: function( event, ui ) {
    //      $( "#ratingResult" ).text( ui.value );
     //     var sliderVals=[];
   //     },
//		var sliderVal;
        //this updates the value of your hidden field when user stops dragging
 //       change: function(event, ui) {
  //         $('#rateToPost').attr('value', ui.value);
  //         sliderVal=ui.value;
  //       }
  //     });

    //   var sliderVals=[];

//	   var sliderVal;
	   
	   stop: function(event, ui) {
           sliderVal = $(this).slider( "value" );
         }
       });
//      Check on recorded slider values-- no longer in use: 3/1/2014
//      var dummy;
//      dummy = setInterval(function(){greeter([sliderVals])},10000);
//      setTimeout(function(){clearInterval(dummy)},21000);

    </script>

<script>

	function nextPage()
	{
		localStorage.setItem('Memory2',sliderVal); // save slider position on submit
	
	        var condition=getCondition();
			if (condition=='A') { window.location.assign('preference.html?'+escape('A')); }
			else { window.location.assign('preference.html?'+escape('B')); }
	}

	function getCondition() { 
		var condition;
		//condition=ReadCookie('parm_value');   // get condition from cookie. DISABLED.
		condition=unescape((''+self.location.search).substring(1)); // get experimental condition from URL
		return(condition);
	}
    
</script>


</body>
</html>